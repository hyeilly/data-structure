## 이진 탐색 트리

- 탐색에 특화된 이진 트리(삽입, 삭제, 참조)

### 이진 탐색 트리의 이해

- 이진 탐색 트리 = 이진 트리 + 데이터의 저장 규칙(데이터의 조회 가능, 삭제 규칙을 정할 수 있음 )

  - 탐색에 특화된 알고리즘
  - `연결 리스트`는 위치 정보가 있음, 데이터의 수는 10억 개인 경우
    - 거치는 노드의 수는 최악의 경우 10억 개
  - `이진 탐색 트리`는 위치 정보가 있음, 데이터의 수는 10억 개인 경우
    - 데이터를 찾아가는 경로가 결정되어 있음(= 위치 정보가 있음)
    - 거치는 노드의 수는 평균 30개 미만

- 이진 탐색 트리의 노드에 저장된 키는 유일
  - 루트 노드의 키 > 왼쪽 서브 트리를 구성하는 키
  - 루트 노드의 키 < 오른쪽 서브 트리를 구성하는 키
  - 왼쪽과 오른쪽 서브 트리도 이진 탐색 트리
- 이진 탐색 트리의 새 노드 추가 과정은 반대로 탐색의 과정이 됨
  - 삽입과 조회의 과정은 간단하게 이루어짐

### 이진 탐색 트리의 구현 방안

- 구현 방법 1
  - 이전에 구현한 이진 트리를 참조하여 처음부터 완전히 다시 구현
- 구현 방법 2
  - 이진 탐색 트리도 이진 트리이니, 이전에 구현한 이진 트리를 활용해 구현
  - `BinaryTree2.h`와 `BinaryTree2.c` 를 활용해 구현

#### 이진 탐색 트리의 구현: 삽입과 탐색

- 삽입의 예
  - 비교대상이 없을 때까지 내려감
  - 비교대상이 없는 그 위치가 새 데이터가 저장될 위치
- 탐색
  - 삽입의 루틴과 탐색의 루틴이 다를 것 없음

#### 이진 탐색 트리 삭제 구현: 상황 별 삭제

- 삭제와 관련해서 고려해야할 3가지 상황

1. 삭제할 노드가 단말 노드인 경우

- 단말 노드가 루트 노드인 경우도 있음

2. 삭제할 노드가 하나의 자식 노드를(하나의 서브 트리를) 갖는 경우
3. 삭제할 노드가 두 개의 자식 노드를(두 개의 서브 트리를) 갖는 경우

- 상황 별로 추가로 삭제할 노드가 루트 노드인 경우를 구분해야하지만 이를 피해가는 형태로 코드 구성하기도 함

#### 이진 탐색 트리 삭제 구현: 상황 1

- 삭제할 노드가 단말 노드인 경우
- 무조건 삭제할 때 노드의 주소값을 가지고 있다고 삭제하는 것이 아닌, 위에 있는 부모 노드 주소값을 가지고 자식 노드를 삭제하는 것

- dNode와 pNode는 각각 삭제할 노드와 이의 부모 노드를 가리키는 포인터 변수

```
if(삭제할 노드가 단말 노드)
{
  if(GetLeftSubTree(pNode) == dNode) // 삭제할 노드가 왼쪽 자식 노드라면,
    RemoveLeftSubTree(pNode); // 왼쪽 자식 노드 트리에서 제거
  else // 삭제할 노드가 오른쪽 자식 노드라면,
    RemoveRightSubTree(pNode); // 오른쪽 자식 노드 트리에서 제거
}
```

#### 이진 탐색 트리 삭제 구현: 상황 2

- 삭제할 노드가 하나의 자식 노드를 갖는 경우
- dNode와 pNode는 각각 삭제할 노드와 이의 부모 노드를 가리키는 포인터 변수

```
if(삭제할 노드가 하나의 자식 노드를 지님)
{
  BTreeNode * dcNode; // 삭제 대상의 자식 노드를 가리키는 포인터 변수
  // 삭제 대상의 자식 노드를 찾음
  if(GetLeftSubTree(dNode) != NULL) // 자식 노드가 왼쪽에 있다면,
    dcNode = GetLeftSubTree(dNode);
  else // 자식 노드가 오른쪽에 있다면
    dcNode = GetRightSubTree(dNode);

  // 삭제 대상의 부모 노드와 자식 노드를 연결
  if(GetLeftSubTree(pNode) == dNode) // 삭제 대상이 왼쪽 자식 노드이면,
    ChangeLeftSubTree(pNode, dcNode); // 왼쪽으로 연결
  else
    ChangeRightSubTree(pNode, dcNode); // 오른쪽으로 연결
}
```

#### 이진 탐색 트리 삭제 구현: 적용 모델

- 삭제가 되는 x가 저장된 노드를 x2가 저장된 노드로 대체. 빈자리는 x2가 저장된 노드의 자식 노드로 대체

1. 삭제할 노드를 대체할 노드를 찾음
2. 대체할 노드에 저장된 값을 삭제할 노드에 대입
3. 대체할 노드의 부모 노드와 자식 노드를 연결
