## 계산기 프로그램 구현

### 계산기 프로그램의 성격

- 다음과 같은 문장의 수식 계산 필요해야함

  - (3 + 4) \* (5 / 2) + (7 + (9 - 5))

- 고려해야하는 사항
  - **소괄호**를 파악하여 그 부분을 먼저 연산
  - 연산자의 우선순위를 근거로 연산의 순위를 결정

### 수식의 표기법

- 중위 표기법 ex) 5 + 2 / 7

  - 수식 내에 연산의 순서에 대한 정보가 담겨있지 않음
  - 소괄호와 연산자의 우선순위라는 것을 정의하여 이를 기반으로 연산의 순서 명시

- 전위 표기법 ex) + 5 / 2 7

  - 수식 내에 연산의 순서에 대한 정보가 담겨있음
  - 소괄호가 필요 없고 연산의 우선순위를 결정할 필요도 없음

- 후위 표기법 ex) 5 2 7 / +

  - 전위 표기법과 마찬가지로 수식 내에 연산의 순서에 대한 정보가 담겨있음
  - 소괄호가 필요 없고 연산의 우선순위를 결정할 필요도 없음

- 소괄호와 연산자의 우선순위를 인식하게 하여 중위 표기법의 수식을 직접 계산하게 프로그래밍하는 것보다 후위 표기법의 수식을 계산하도록 프로그래밍 하는 것이 더 쉬움

#### 중위 -> 후위 : 소괄호 고려하지 않고

- 수식을 이루는 왼쪽 문자부터 시작해서 하나씩 처리해 나감
- 피 연산자를 만나면 무조건 변환된 수식이 위치할 자리로 이동시킴
- /연산자가 우선순위가 높으므로 + 연산자 위에 올림
- 쟁반에 위치한 연산자의 우선순위가 높다면
  - 쟁반에 위치한 연산자를 꺼내서 변환된 수식이 위치할 자리로 옮김
  - 새 연산자는 쟁반으로 옮김
- 쟁반에 위치한 연산자의 우선순위가 낮다면
  - 쟁반에 위치한 연산자의 위에 새 연산자를 쌓는다
- 우선순위가 높은 연산자는 우선순위가 낮은 연산자 위에 올라서서, 우선순위가 낮은 연산자가 먼저 자리를 잡지 못하게 하려는 목적
- 피 연산자는 무조건 변환된 수식의 자리로 이동
- 나머지 연산자들은 쟁반에서 차례로 옮김

##### 정리

- 피 연산자는 그냥 옮김
- 연산자는 쟁반으로 옮김
- 연산자가 쟁반에 있다면 우선순위를 비교하여 처리방법을 결정
- 마지막까지 쟁반에 남아있는 연산자들은 하나씩 꺼내서 옮김

#### 중위 -> 후위 : 고민될 수 있는 상황

- 우선순위가 같은 경우
  - 연산자가 우선순위가 높다고 가정하고(+ 연산자가 먼저 등장했으므로) 일을 진행
  - \+ 연산자를 옮기고 그 자리에 \- 연산자를 가져다놔야함
- 둘 이상의 연산자가 쌓여있는 경우

  - / \+ \-
  - 스택에 몇개의 연산자가 있던지 1대1 비교 필요

- 후위 표기법의 수식에서는 먼저 연산이 이뤄져야 하는 연산자가 뒤에 연산이 이뤄지는 연산자보다 앞에 위치해야함
- 따라서 소괄호 안에 있는 연산자들이 후위 표기법의 수식에서 앞부분에 위치해야함
- ( 연산자의 우선순위는 그 어떤 사칙 연산자들보다 낮다고 간주. 그래서 ) 연산자가 등장할 때까지 쟁반에 남아 소괄호의 경계 역할을 해야함
- ex) (1 + 2 \* 3) / 4
  - 변환된 수식이 위치할 자리 => 1 2 3 \* + 4 /
- ) 연산자를 만나면 쟁반에서 ( 연산자를 만날 때 까지 연산자를 변환된 수식의 자리로 옮김
- ( 연산자는 쟁반의 또 다른 바닥. 그리고 ) 연산자는 변환이 되어야 하는 작은 수식의 끝을 의미
- ) 연산자를 만나면 ( 연산자를 만날 때까지 연산자를 이동시켜야함

### 프로그램 구현

- ) 연산자는 소괄호의 끝을 알리는 메시지 역할. 따라서 쟁반으로 가지 않음. 때문에 ) 연산자에 대한 반환 값은 정의되어 있을 필요가 없음
